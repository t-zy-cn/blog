import{LoadingIcon as m,decodeData as h}from"@vuepress/helper/client";import{useEventListener as v,useDebounceFn as _}from"@vueuse/core";import{defineComponent as S,toRefs as y,shallowRef as g,ref as d,h as u,onMounted as E,watch as R,nextTick as C,onUnmounted as U}from"vue";import{onContentUpdated as D}from"vuepress/client";import"../styles/flowchart.scss";import{f as p}from"../index-c7nQoFwI.js";var F=S({name:"FlowChart",props:{code:{type:String,required:!0},id:{type:String,required:!0},preset:{type:String,default:"vue"}},setup(t){const{code:n,id:c,preset:f}=y(t),w=g(),o=d(!1),a=d(1);let r=null;const i=e=>e<419?.8:e>1280?1:.9;v("resize",_(()=>{if(r){const e=i(window.innerWidth);a.value!==e&&(a.value=e,r.draw(t.id,{...p[t.preset],scale:e}))}},100));const s=()=>{r?.clean(),r=null},l=async()=>{if(__VUEPRESS_SSR__)return;const{parse:e}=await import("flowchart.ts");r=e(h(n.value)),a.value=i(window.innerWidth),o.value=!0,r.draw(t.id,{...p[t.preset],scale:a.value})};return D(async e=>{e==="mounted"&&await l()}),E(()=>{__VUEPRESS_DEV__&&R([n,c,f],async()=>{s(),await C(),await l()},{flush:"post"})}),U(s),()=>[o.value?null:u(m,{class:"flowchart-loading",height:192}),u("div",{ref:w,class:["flowchart-wrapper",t.preset],id:t.id,style:{display:o.value?"block":"none"}})]}});export{F as default};
//# sourceMappingURL=FlowChart.js.map
